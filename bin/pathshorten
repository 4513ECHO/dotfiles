#!/bin/bash

if [[ -p /dev/stdin ]]; then
  dir="$(cat -)"
else
  dir="$1"
fi

tildepath="${dir/#$HOME/'~'}"
read -ra patharray <<< "${tildepath//\// }"
result=""

for ((i=0; i < ${#patharray[@]}; i++)) {
  if [[ "$(("$i"+1))" = "${#patharray[@]}" ]]; then
    result+="${patharray[$i]}"
    break
  fi
  if [[ "${patharray[$i]:0:1}" =~ ^\. ]]; then
    result+="${patharray[$i]:0:2}/"
  else
    result+="${patharray[$i]:0:1}/"
  fi
}

echo -n "$result"
