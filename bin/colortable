#!/bin/bash


colortable () {
  local c
  for c in {0..255}; do
    printf '\033[38;5;%dm %03d\033[m' "$c" "$c"
    [[ $(("$c"%16)) -eq 15 ]] && echo
  done
  echo
}

printcolor () {
  printf "\033[48;5;%dm\033[38;5;250m%6d \033[m" "$1" "$1"
}

colortable_rich () {
  local r b g
  for r in {0..4}; do
    for b in {0..5}; do
      printcolor $(("$r"*36+5*6+"$b"+16))
    done
    echo
  done
  for g in {0..5}; do
    for b in {0..5}; do
      printcolor $((5*36+30-"$g"*6+"$b"+16))
    done
    for r in {1..5}; do
      printcolor $((180-"$r"*36+30-"$g"*6+5+16))
    done
    echo
  done
}

colortable_system () {
  local c
  for c in {0..15}; do
    printf '\033[48;5;%dm  \033[m' "$c"
    [[ $(("$c"%8)) -eq 7 ]] && echo
  done
  echo
}

if [[ "$1" = "rich" ]]; then
  colortable_rich
elif [[ "$1" = "system" ]]; then
  colortable_system
else
  colortable
fi
